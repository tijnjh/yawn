{"version":3,"file":"RunnerServer.js","names":["RpcServer","_interopRequireWildcard","require","Effect","_Function","Layer","Mailbox","Option","ClusterError","Message","MessageStorage","Reply","Runners","Sharding","_ShardingConfig","ShardManager","ShardStorage","SynchronizedClock","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","constVoid","constant","void","layerHandlers","exports","Rpcs","toLayer","gen","sharding","storage","Ping","Notify","envelope","notify","_tag","IncomingRequest","respond","lastSentReply","none","IncomingEnvelope","persisted","request","resume","replyEncoded","message","reply","flatMap","serialize","succeed","zipRight","registerReplyHandler","sync","fail","EntityNotAssignedToRunner","address","send","async","resume_","Stream","make","mailbox","unsafeOffer","as","suspend","Envelope","layer","spanPrefix","disableTracing","pipe","provide","layerWithClients","provideMerge","layerRpc","layerClientRpc","layerClientOnly","layerNoop","updateService","ShardingConfig","config","runnerAddress"],"sources":["../../src/RunnerServer.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}