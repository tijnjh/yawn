{"version":3,"file":"Sharding.js","names":["RpcClient","_interopRequireWildcard","require","_RpcMessage","Arr","Cause","Context","Deferred","Effect","Equal","Exit","Fiber","FiberHandle","FiberMap","FiberRef","_Function","HashMap","Iterable","Layer","MutableHashMap","MutableHashSet","MutableRef","Option","Predicate","PubSub","Schedule","Scope","Stream","_ClusterError","ClusterError","_ClusterSchema","ClusterSchema","_EntityAddress","_EntityId","Envelope","EntityManager","_entityReaper","_hash","_interruptors","_resourceMap","Message","MessageStorage","Reply","_Runners","_ShardId","_ShardingConfig","_ShardingRegistrationEvent","_ShardManager","_ShardStorage","_SingletonAddress","Snowflake","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","Sharding","Tag","exports","make","gen","config","ShardingConfig","runners","Runners","shardManager","ShardManagerClient","snowflakeGen","Generator","shardingScope","scope","isShutdown","storage","storageEnabled","noop","shardStorage","ShardStorage","entityManagers","Map","shardAssignments","empty","selfShards","acquiredShards","activeShardsLatch","makeLatch","events","unbounded","getRegistrationEvents","fromPubSub","isLocalRunner","address","isSome","runnerAddress","equals","value","getShardId","entityId","group","id","Math","abs","hashString","shardsPerGroup","ShardId","disableValidation","isEntityOnLocalShards","shardId","selfAddress","addFinalizerExit","ignore","releaseAll","releasingShards","unsafeOpen","await","unsafeClose","remove","add","unacquiredShards","size","forkIn","syncSingletons","releaseShards","acquired","acquire","resetShards","length","storageReadLatch","open","sleep","pipe","catchAllCause","cause","logWarning","forever","annotateLogs","package","module","fiber","runner","interruptible","suspend","refresh","flatMap","some","_","symbol","andThen","void","retry","times","schedule","spaced","logError","clearSelfShards","fixed","releaseShardsLock","unsafeMakeSemaphore","withPermits","forEach","values","state","manager","interruptShard","concurrency","discard","release","clear","singletons","singletonFibers","withSingletonLock","registerSingleton","fnUntraced","name","run","options","shardGroup","SingletonAddress","EntityId","map","dieMessage","context","wrappedRun","locally","currentLogAnnotations","never","scoped","provide","orDie","publish","SingletonRegistered","logDebug","running","unsafeHas","shouldBeRunning","internalInterruptors","fiberId","openStorageReadLatch","constant","storageReadLock","withStorageReadLock","storageAlreadyProcessed","_message","sentRequestIds","Set","sentRequestIdSets","addFinalizer","message","envelope","requestId","entityType","isProcessingFor","excludeReplies","take","messages","unprocessedMessages","currentSentRequestIds","send","index","_tag","respond","ReplyWithContext","fromDefect","unsafeNext","defect","EntityNotManagedByRunner","isProcessing","resumptionState","entityResumptionState","unprocessed","interrupts","error","failureOption","isNone","isInterrupted","saveReply","squash","resumeEntityFromStorage","whileLoop","while","step","body","oldest","unsafeHead","delete","ensuring","repeat","entityMessagePollInterval","delay","lastReceivedMessage","resumeEntityFromStorageImpl","getOrThrow","done","messageIds","push","unprocessedMessagesById","sendWithRetry","catchTags","fail","EntityNotAssignedToRunner","interrupt","MailboxFull","sendRetryInterval","AlreadyProcessingMessage","sync","effect","entity","sendLocal","simulateRemoteSerialization","notifyLocal","isLocal","notify","envelopeId","storageOnly","isTransientError","or","RunnerUnavailable","is","sendOutgoing","retries","catchIf","maybeRunner","isPersisted","rpc","annotations","Persisted","runnerIsLocal","die","reset","clearReplies","matchCause","onSuccess","onFailure","shardManagerTimeoutFiber","extend","startShardManagerTimeout","shardManagerUnavailableTimeout","onlyIfMissing","stopShardManagerTimeout","current","machineId","register","shardGroups","setMachineId","mailbox","shardingEvents","startedLatch","eventsFiber","takeAll","event","shard","shards","RunnerNotRegistered","intoDeferred","zipRight","forkScoped","syncFiber","syncAssignments","refreshAssignmentsInterval","joinAll","exponential","union","assignments","getAssignments","clientRequests","clients","ResourceMap","client","makeNoSerialization","protocol","spanPrefix","type","disableTracing","ClientTracingEnabled","supportsAck","generateRequestId","RequestId","flatten","onFromClient","unsafeGet","ClientAddressTag","getCurrentFiber","requests","tag","entry","currentContext","makeClientRespond","write","clientRespondDiscard","OutgoingRequest","makeRequest","payload","headers","traceId","spanId","sampled","lastReceivedReply","none","OutgoingEnvelope","AckChunk","replyId","lastChunkId","Uninterruptible","isTransientInterrupt","interruptors","Interrupt","withFiberRuntime","EntityAddress","getShardGroup","clientFn","merge","proxyClient","Proxy","p","target","undefined","makeClient","_reply","reply","clientId","exit","reaper","EntityReaper","registerEntity","build","sharding","EntityRegistered","close","unregister","activeEntityCount","count","of","pollStorage","layer","layerGenerator","Default","GenericTag"],"sources":["../../src/Sharding.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}