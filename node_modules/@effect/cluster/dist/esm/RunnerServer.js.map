{"version":3,"file":"RunnerServer.js","names":["RpcServer","Effect","constant","Layer","Mailbox","Option","ClusterError","Message","MessageStorage","Reply","Runners","Sharding","ShardingConfig","ShardManager","ShardStorage","SynchronizedClock","constVoid","void","layerHandlers","Rpcs","toLayer","gen","sharding","storage","Ping","Notify","envelope","notify","_tag","IncomingRequest","respond","lastSentReply","none","IncomingEnvelope","persisted","request","resume","replyEncoded","message","reply","flatMap","serialize","succeed","zipRight","registerReplyHandler","sync","fail","EntityNotAssignedToRunner","address","send","async","resume_","Stream","make","mailbox","unsafeOffer","as","suspend","Envelope","layer","spanPrefix","disableTracing","pipe","provide","layerWithClients","provideMerge","layerRpc","layerClientRpc","layerClientOnly","layerNoop","updateService","config","runnerAddress"],"sources":["../../src/RunnerServer.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}