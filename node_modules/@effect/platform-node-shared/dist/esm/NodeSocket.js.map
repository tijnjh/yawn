{"version":3,"file":"NodeSocket.js","names":["Socket","Channel","Context","Deferred","Effect","FiberSet","identity","Layer","Scope","Net","NetSocket","GenericTag","makeNet","options","fromDuplex","scopeWith","scope","conn","flatMap","addFinalizer","sync","closed","destroySoon","destroy","async","resume","createConnection","once","succeed","on","cause","fail","SocketGenericError","reason","open","withFiberRuntime","fiber","currentSocket","latch","unsafeMakeLatch","openContext","currentContext","run","handler","opts","scopedWith","fnUntraced","fiberSet","make","pipe","extend","undefined","off","onData","onEnd","onError","onClose","openTimeout","timeoutFail","duration","onTimeout","Error","provideService","runtime","onOpen","join","chunk","result","isEffect","unsafeDone","deferred","void","hadError","SocketCloseError","code","mapInputContext","input","merge","ensuring","unsafeClose","interruptible","write","whenOpen","isCloseEvent","writer","acquireRelease","writableEnded","end","of","TypeId","runRaw","makeNetChannel","unwrapScoped","map","toChannelWith","layerNet","effect"],"sources":["../../src/NodeSocket.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}