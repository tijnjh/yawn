{"version":3,"file":"Socket.js","names":["Channel","Context","Deferred","Effect","ExecutionStrategy","Exit","FiberRef","FiberSet","dual","globalValue","Layer","Mailbox","Predicate","Scope","TypeIdError","TypeId","Symbol","for","isSocket","u","hasProperty","Socket","GenericTag","CloseEventTypeId","CloseEvent","code","reason","constructor","toString","isCloseEvent","SocketErrorTypeId","isSocketError","SocketGenericError","message","SocketCloseError","is","isClean","closeReason","toChannelMap","self","f","gen","scope","mailbox","make","writeScope","fork","sequential","write","extend","writer","emit","chunk","data","input","awaitRead","void","catchAllCause","cause","failCause","error","zipRight","close","done","runRaw","unsafeOffer","pipe","into","forkIn","interruptible","embedInput","toChannel","unwrapScoped","encoder","TextEncoder","encode","toChannelString","args","encoding","decoder","TextDecoder","decode","toChannelWith","makeChannel","unwrap","map","defaultCloseCodeIsError","WebSocket","WebSocketConstructor","layerWebSocketConstructorGlobal","succeed","url","protocols","globalThis","makeWebSocket","options","fromWebSocket","acquireRelease","flatMap","ws","sync","acquire","withFiberRuntime","fiber","currentWS","latch","unsafeMakeLatch","acquireContext","currentContext","closeCodeIsError","handler","opts","scopedWith","fnUntraced","fiberSet","run","provideService","runtime","open","onMessage","event","Blob","promise","arrayBuffer","andThen","buffer","Uint8Array","result","isEffect","onError","removeEventListener","onClose","unsafeDone","deferred","fail","addEventListener","once","readyState","openDeferred","unsafeMake","id","await","timeoutFail","duration","openTimeout","onTimeout","raceFirst","join","onOpen","catchIf","_","mapInputContext","merge","ensuring","unsafeClose","undefined","whenOpen","send","of","makeWebSocketChannel","layerWebSocket","effect","currentSendQueueCapacity","fromTransformStream","currentStream","stream","reader","readable","getReader","addFinalizer","cancel","runFork","tryPromise","try","value","read","catch","writers","WeakMap","getWriter","get","writable","set","suspend"],"sources":["../../src/Socket.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}