{"version":3,"file":"HttpLayerRouter.js","names":["HttpServerRequest","HttpServerResponse","Arr","Context","Effect","FiberRef","compose","constant","dual","identity","Layer","Option","Scope","Tracer","FindMyWay","HttpApiBuilder","HttpApp","HttpMiddleware","RouteContext","RouteContextTypeId","HttpServer","HttpServerError","OpenApi","TypeId","Symbol","for","HttpRouter","GenericTag","make","gen","router","RouterConfig","middleware","Set","addAll","routes","contextWith","context","getMiddleware","applyMiddleware","effect","i","length","route","makeRoute","handler","method","all","path","on","of","prefixed","prefix","newPrefix","prefixPath","map","prefixRoute","add","options","isEffect","flatMap","uninterruptible","some","addGlobalMiddleware","middleware_","sync","asHttpEffect","withFiberRuntime","fiber","contextMap","Map","currentContext","unsafeMap","request","get","key","result","find","url","undefined","fail","RouteNotFound","_tag","set","sliceRequestUrl","value","ParsedSearchParams","searchParams","params","span","ParentSpan","attribute","locally","interruptible","unsafeMake","size","fn","reverse","prefexLen","modify","slice","Reference","defaultValue","schemaJson","schemaNoBody","schemaParams","schemaPathParams","use","f","scopedDiscard","toAdd","layer","toHttpEffect","appLayer","scope","memoMap","CurrentMemoMap","buildWithMemoMap","provideMerge","RouteTypeId","none","removeTrailingSlash","endsWith","self","match","onNone","onSome","existingPrefix","MiddlewareTypeId","arguments","makeMiddleware","global","MiddlewareImpl","scopedContext","fnContextKey","succeedContext","middlewareId","layerFn","dependencies","constructor","contextKey","stack","depsContext","push","pipe","provide","combine","other","middlewareCache","WeakMap","arr","topLevel","empty","maxLength","startsWith","fromIterable","cors","disableLogger","withLoggerDisabled","addHttpApi","api","ApiMiddleware","buildMiddleware","Router","unwrap","fnUntraced","router_","existing","existingRoutesMap","has","openapiPath","spec","fromApi","succeed","unsafeJson","effectDiscard","serve","logger","RouterLayer","routerConfig","unwrapScoped","disableListenLog","withLogAddress","toWebHandler","toWebHandlerLayerWith","toHandler","r"],"sources":["../../src/HttpLayerRouter.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}