{"version":3,"file":"DurableDeferred.js","names":["Context","_interopRequireWildcard","require","Effect","Encoding","Exit","_Function","Option","Schema","Workflow","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","TypeId","exports","Symbol","for","make","name","options","successSchema","success","Void","errorSchema","error","Never","exitSchema","failure","defect","Defect","withActivityAttempt","gen","attempt","CurrentAttempt","EngineTag","GenericTag","InstanceTag","Reference","defaultValue","await_","await","fnUntraced","self","engine","instance","oexit","wrapActivityResult","deferredResult","isNone","suspend","flatten","orDie","decodeUnknown","value","into","dual","effect","contextWithEffect","context","onExit","exit","suspended","encodedExit","encode","deferredDone","workflowName","workflow","executionId","deferredName","raceAll","deferred","isSome","effects","TokenTypeId","Token","String","pipe","brand","TokenParsed","Class","asToken","encodeBase64Url","JSON","stringify","FromString","StringFromBase64Url","compose","parseJson","Tuple","transform","decode","parsed","fromString","decodeSync","encodeSync","token","tokenFromExecutionId","tokenFromPayload","map","payload","done","succeed","fail","failCause","cause"],"sources":["../../src/DurableDeferred.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}