{"version":3,"file":"Reactivity.js","names":["Context","_interopRequireWildcard","require","Effect","Exit","FiberHandle","_Function","Hash","Layer","Mailbox","Scope","Stream","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","Reactivity","Tag","exports","make","sync","handlers","Map","unsafeInvalidate","keys","Array","isArray","length","stringOrHash","undefined","run","record","key","hashes","idHashes","invalidate","mutation","effect","zipLeft","unsafeRegister","handler","resolvedKeys","map","recordHashes","Set","add","delete","size","query","gen","scope","results","runFork","makeRuntime","running","pending","handleExit","exit","_tag","unsafeDone","failCause","cause","unsafeOffer","value","addObserver","cancel","addFinalizer","stream","tables","pipe","toStream","unwrapScoped","of","dual","flatMap","layer","scoped","u","hash","keyHash","ids","push","idHash"],"sources":["../../src/Reactivity.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}