{"version":3,"file":"EventLog.js","names":["KeyValueStore","Chunk","Context","Effect","FiberMap","FiberRef","identity","Layer","Option","pipeArguments","Predicate","Queue","Redacted","Schema","Entry","EventJournal","makeEntryId","Reactivity","SchemaTypeId","Symbol","for","isEventLogSchema","u","hasProperty","schema","groups","EventLog","HandlersTypeId","handlersProto","_Endpoints","handle","tag","handler","makeHandlers","group","context","handlers","event","events","pipe","arguments","options","Object","assign","create","f","gen","result","isEffect","registry","Registry","add","scopedDiscard","provide","layer","groupCompaction","effect","log","registerCompaction","keys","fnUntraced","entries","write","writePayload","timestamp","payload","entry","id","msecs","encode","payloadMsgPack","locally","currentContext","orDie","primaryKey","disableValidation","byPrimaryKey","Map","decodeUnknown","has","record","get","push","taggedPayloads","_tag","set","createdAtMillis","layerEventLog","groupReactivity","Array","isArray","registerReactivity","obj","Tag","sync","items","Identity","makeRandom","of","publicKey","crypto","randomUUID","privateKey","make","getRandomValues","Uint8Array","Struct","String","Uint8ArrayFromBase64","SchemaFromString","StringFromBase64Url","compose","parseJson","decodeString","s","decodeSync","encodeString","encodeSync","layerIdentityKvs","store","forSchema","current","key","isSome","value","journal","remotes","compactors","journalSemaphore","makeSemaphore","reactivity","reactivityKeys","runRemote","remote","startSequence","nextRemoteSequence","changes","takeAll","flatMap","writeFromRemote","remoteId","toReadonlyArray","compact","size","remoteEntries","unprocessed","brackets","uncompacted","uncompactedRemote","i","length","remoteEntry","compactor","compacted","currentEntries","j","nextRemoteEntry","map","_","undefined","conflicts","logDebug","decodePayload","decode","decodedConflicts","unsafeInvalidate","catchAllCause","annotateLogs","service","entryId","idString","withPermits","forever","fork","withRemoteUncommited","addFinalizer","ignore","takeBetween","Number","MAX_SAFE_INTEGER","zipRight","sleep","scoped","provideService","interruptible","writeHandler","tap","mapInputContext","merge","die","registerRemote","acquireRelease","run","remove","Set","delete","destroy","_schema","makeClient"],"sources":["../../src/EventLog.ts"],"sourcesContent":[null],"mappings":"AAIA,OAAO,KAAKA,aAAa,MAAM,gCAAgC;AAC/D,OAAO,KAAKC,KAAK,MAAM,cAAc;AACrC,OAAO,KAAKC,OAAO,MAAM,gBAAgB;AACzC,OAAO,KAAKC,MAAM,MAAM,eAAe;AACvC,OAAO,KAAKC,QAAQ,MAAM,iBAAiB;AAC3C,OAAO,KAAKC,QAAQ,MAAM,iBAAiB;AAC3C,SAASC,QAAQ,QAAQ,iBAAiB;AAC1C,OAAO,KAAKC,KAAK,MAAM,cAAc;AACrC,OAAO,KAAKC,MAAM,MAAM,eAAe;AAEvC,SAAwBC,aAAa,QAAQ,iBAAiB;AAC9D,OAAO,KAAKC,SAAS,MAAM,kBAAkB;AAC7C,OAAO,KAAKC,KAAK,MAAM,cAAc;AAErC,OAAO,KAAKC,QAAQ,MAAM,iBAAiB;AAC3C,OAAO,KAAKC,MAAM,MAAM,eAAe;AAMvC,SAASC,KAAK,EAAEC,YAAY,EAAEC,WAAW,QAAQ,mBAAmB;AAEpE,OAAO,KAAKC,UAAU,MAAM,iBAAiB;AAE7C;;;;AAIA,OAAO,MAAMC,YAAY,gBAAkBC,MAAM,CAACC,GAAG,CAAC,8CAA8C,CAAC;AAQrG;;;;AAIA,OAAO,MAAMC,gBAAgB,GAAIC,CAAU,IAA+BZ,SAAS,CAACa,WAAW,CAACD,CAAC,EAAEJ,YAAY,CAAC;AAYhH;;;;AAIA,OAAO,MAAMM,MAAM,GAAGA,CACpB,GAAGC,MAAc,KACiB;EAClC,SAASC,QAAQA,CAAA,GAAI;EACrBA,QAAQ,CAACR,YAAY,CAAC,GAAGA,YAAY;EACrCQ,QAAQ,CAACD,MAAM,GAAGA,MAAM;EACxB,OAAOC,QAAe;AACxB,CAAC;AAED;;;;AAIA,OAAO,MAAMC,cAAc,gBAAkBR,MAAM,CAACC,GAAG,CAAC,wCAAwC,CAAC;AAkIjG,MAAMQ,aAAa,GAAG;EACpB,CAACD,cAAc,GAAG;IAChBE,UAAU,EAAEvB;GACb;EACDwB,MAAMA,CAEJC,GAAQ,EACRC,OAAiD;IAEjD,OAAOC,YAAY,CAAC;MAClBC,KAAK,EAAE,IAAI,CAACA,KAAK;MACjBC,OAAO,EAAE,IAAI,CAACA,OAAO;MACrBC,QAAQ,EAAE;QACR,GAAG,IAAI,CAACA,QAAQ;QAChB,CAACL,GAAG,GAAG;UACLM,KAAK,EAAE,IAAI,CAACH,KAAK,CAACI,MAAM,CAACP,GAAG,CAAC;UAC7BI,OAAO,EAAE,IAAI,CAACA,OAAO;UACrBH;;;KAGL,CAAC;EACJ,CAAC;EACDO,IAAIA,CAAA;IACF,OAAO9B,aAAa,CAAC,IAAI,EAAE+B,SAAS,CAAC;EACvC;CACD;AAED,MAAMP,YAAY,GAA8BQ,OAI/C,IAA8BC,MAAM,CAACC,MAAM,CAACD,MAAM,CAACE,MAAM,CAAChB,aAAa,CAAC,EAAEa,OAAO,CAAC;AAEnF;;;;AAIA,OAAO,MAAMP,KAAK,GAAGA,CACnBA,KAAyB,EACzBW,CAAyE,KAEzE1C,MAAM,CAAC2C,GAAG,CAAC,aAAS;EAClB,MAAMX,OAAO,GAAG,OAAOhC,MAAM,CAACgC,OAAO,EAA4B;EACjE,MAAMY,MAAM,GAAGF,CAAC,CAACZ,YAAY,CAAC;IAC5BC,KAAK,EAAEA,KAAY;IACnBE,QAAQ,EAAE,EAAE;IACZD;GACD,CAAC,CAAC;EACH,MAAMC,QAAQ,GAAGjC,MAAM,CAAC6C,QAAQ,CAACD,MAAM,CAAC,GAAG,OAAQA,MAAoC,GAAGA,MAAM;EAChG,MAAME,QAAQ,GAAG,OAAOC,QAAQ;EAChC,OAAOD,QAAQ,CAACE,GAAG,CAACf,QAAQ,CAAC;AAC/B,CAAC,CAAC,CAACG,IAAI,CACLhC,KAAK,CAAC6C,aAAa,EACnB7C,KAAK,CAAC8C,OAAO,CAACH,QAAQ,CAACI,KAAK,CAAC,CACvB;AAEV;;;;AAIA,OAAO,MAAMC,eAAe,GAAGA,CAC7BrB,KAAyB,EACzBsB,MAQmC,KAEnCrD,MAAM,CAAC2C,GAAG,CAAC,aAAS;EAClB,MAAMW,GAAG,GAAG,OAAO/B,QAAQ;EAC3B,MAAMS,OAAO,GAAG,OAAOhC,MAAM,CAACgC,OAAO,EAA6B;EAElE,OAAOsB,GAAG,CAACC,kBAAkB,CAAC;IAC5BpB,MAAM,EAAEI,MAAM,CAACiB,IAAI,CAACzB,KAAK,CAACI,MAAM,CAAC;IACjCkB,MAAM,EAAErD,MAAM,CAACyD,UAAU,CAAC,WAAU;MAAEC,OAAO;MAAEC;IAAK,CAAE;MACpD,MAAMC,YAAY,GAAGA,CAACC,SAAiB,EAAEjC,GAAW,EAAEkC,OAAY,KAChE9D,MAAM,CAAC2C,GAAG,CAAC,aAAS;QAClB,MAAMT,KAAK,GAAGH,KAAK,CAACI,MAAM,CAACP,GAAG,CAA8B;QAC5D,MAAMmC,KAAK,GAAG,IAAIpD,KAAK,CAAC;UACtBqD,EAAE,EAAEnD,WAAW,CAAC;YAAEoD,KAAK,EAAEJ;UAAS,CAAE,CAAC;UACrC3B,KAAK,EAAEN,GAAG;UACVkC,OAAO,EAAE,OAAQpD,MAAM,CAACwD,MAAM,CAAChC,KAAK,CAACiC,cAAc,CAAC,CAACL,OAAO,CAAC,CAAC1B,IAAI,CAChEpC,MAAM,CAACoE,OAAO,CAAClE,QAAQ,CAACmE,cAAc,EAAErC,OAAO,CAAC,EAChDhC,MAAM,CAACsE,KAAK,CACiB;UAC/BC,UAAU,EAAErC,KAAK,CAACqC,UAAU,CAACT,OAAO;SACrC,EAAE;UAAEU,iBAAiB,EAAE;QAAI,CAAE,CAAC;QAC/B,OAAOb,KAAK,CAACI,KAAK,CAAC;MACrB,CAAC,CAAC;MAEJ,MAAMU,YAAY,GAAG,IAAIC,GAAG,EASzB;MACH,KAAK,MAAMX,KAAK,IAAIL,OAAO,EAAE;QAC3B,MAAMI,OAAO,GACX,OAAQpD,MAAM,CAACiE,aAAa,CAAE5C,KAAK,CAACI,MAAM,CAAC4B,KAAK,CAAC7B,KAAK,CAAS,CAACiC,cAAc,CAAC,CAACJ,KAAK,CAACD,OAAO,CAAC,CAAC1B,IAAI,CACjGpC,MAAM,CAACoE,OAAO,CAAClE,QAAQ,CAACmE,cAAc,EAAErC,OAAO,CAAC,CAC1B;QAE1B,IAAIyC,YAAY,CAACG,GAAG,CAACb,KAAK,CAACQ,UAAU,CAAC,EAAE;UACtC,MAAMM,MAAM,GAAGJ,YAAY,CAACK,GAAG,CAACf,KAAK,CAACQ,UAAU,CAAE;UAClDM,MAAM,CAACnB,OAAO,CAACqB,IAAI,CAAChB,KAAK,CAAC;UAC1Bc,MAAM,CAACG,cAAc,CAACD,IAAI,CAAC;YACzBE,IAAI,EAAElB,KAAK,CAAC7B,KAAK;YACjB4B;WACD,CAAC;QACJ,CAAC,MAAM;UACLW,YAAY,CAACS,GAAG,CAACnB,KAAK,CAACQ,UAAU,EAAE;YACjCb,OAAO,EAAE,CAACK,KAAK,CAAC;YAChBiB,cAAc,EAAE,CAAC;cAAEC,IAAI,EAAElB,KAAK,CAAC7B,KAAK;cAAE4B;YAAO,CAAE;WAChD,CAAC;QACJ;MACF;MAEA,KAAK,MAAM,CAACS,UAAU,EAAE;QAAEb,OAAO;QAAEsB;MAAc,CAAE,CAAC,IAAIP,YAAY,EAAE;QACpE,OAAQpB,MAAM,CAAC;UACbkB,UAAU;UACVb,OAAO;UACPvB,MAAM,EAAE6C,cAAqB;UAC7BrB,KAAKA,CAAC/B,GAAG,EAAEkC,OAAO;YAChB,OAAOF,YAAY,CAACF,OAAO,CAAC,CAAC,CAAC,CAACyB,eAAe,EAAEvD,GAAG,EAAEkC,OAAO,CAAC;UAC/D;SACD,CAAC,CAAC1B,IAAI,CACLpC,MAAM,CAACoE,OAAO,CAAClE,QAAQ,CAACmE,cAAc,EAAErC,OAAO,CAAC,CACzB;MAC3B;IACF,CAAC;GACF,CAAC;AACJ,CAAC,CAAC,CAACI,IAAI,CACLhC,KAAK,CAAC6C,aAAa,EACnB7C,KAAK,CAAC8C,OAAO,CAACkC,aAAa,CAAC,CAC7B;AAEH;;;;AAIA,OAAO,MAAMC,eAAe,GAAGA,CAC7BtD,KAAyB,EACzByB,IAEyB,KAEzBxD,MAAM,CAAC2C,GAAG,CAAC,aAAS;EAClB,MAAMW,GAAG,GAAG,OAAO/B,QAAQ;EAC3B,IAAI,CAAC+D,KAAK,CAACC,OAAO,CAAC/B,IAAI,CAAC,EAAE;IACxB,OAAOF,GAAG,CAACkC,kBAAkB,CAAChC,IAAW,CAAC;IAC1C;EACF;EACA,MAAMiC,GAAG,GAA0C,EAAE;EACrD,KAAK,MAAM7D,GAAG,IAAIG,KAAK,CAACI,MAAM,EAAE;IAC9BsD,GAAG,CAAC7D,GAAG,CAAC,GAAG4B,IAAI;EACjB;EACA,OAAOF,GAAG,CAACkC,kBAAkB,CAACC,GAAG,CAAC;AACpC,CAAC,CAAC,CAACrD,IAAI,CACLhC,KAAK,CAAC6C,aAAa,EACnB7C,KAAK,CAAC8C,OAAO,CAACkC,aAAa,CAAC,CAC7B;AAEH;;;;AAIA,OAAM,MAAOrC,QAAS,sBAAQhD,OAAO,CAAC2F,GAAG,CAAC,wCAAwC,CAAC,EAMhF;EACD;;;EAGA,OAAOvC,KAAK,gBAAG/C,KAAK,CAACuF,IAAI,CAAC5C,QAAQ,EAAE,MAAK;IACvC,MAAM6C,KAAK,GAAuC,EAAE;IAEpD,OAAO;MACL5C,GAAG,EAAGf,QAA8B,IAClCjC,MAAM,CAAC2F,IAAI,CAAC,MAAK;QACf,KAAK,MAAM/D,GAAG,IAAIK,QAAQ,CAACA,QAAQ,EAAE;UACnC2D,KAAK,CAAChE,GAAG,CAAC,GAAGK,QAAQ,CAACA,QAAQ,CAACL,GAAG,CAAC;QACrC;MACF,CAAC,CAAC;MACJK,QAAQ,EAAEjC,MAAM,CAAC2F,IAAI,CAAC,MAAMC,KAAK;KAC3B;EACV,CAAC,CAAC;;AAGJ;;;;AAIA,OAAM,MAAOC,QAAS,sBAAQ9F,OAAO,CAAC2F,GAAG,CAAC,wCAAwC,CAAC,EAG/E;EACF;;;EAGA,OAAOI,UAAUA,CAAA;IACf,OAAOD,QAAQ,CAACE,EAAE,CAAC;MACjBC,SAAS,EAAEC,MAAM,CAACC,UAAU,EAAE;MAC9BC,UAAU,EAAE1F,QAAQ,CAAC2F,IAAI,CAACH,MAAM,CAACI,eAAe,CAAC,IAAIC,UAAU,CAAC,EAAE,CAAC,CAAC;KACrE,CAAC;EACJ;EACA;;;EAGA,OAAgB5F,MAAM,gBAAGA,MAAM,CAAC6F,MAAM,CAAC;IACrCP,SAAS,EAAEtF,MAAM,CAAC8F,MAAM;IACxBL,UAAU,eAAEzF,MAAM,CAACD,QAAQ,CAACC,MAAM,CAAC+F,oBAAoB;GACxD,CAAC;EACF;;;EAGA,OAAgBC,gBAAgB,gBAAGhG,MAAM,CAACiG,mBAAmB,CAACvE,IAAI,cAChE1B,MAAM,CAACkG,OAAO,cAAClG,MAAM,CAACmG,SAAS,CAAC,IAAI,CAACnG,MAAM,CAAC,CAAC,CAC9C;EAED;;;EAGA,OAAOoG,YAAY,GAAIC,CAAS,IAAuBrG,MAAM,CAACsG,UAAU,CAACnB,QAAQ,CAACa,gBAAgB,CAAC,CAACK,CAAC,CAAC;EACtG;;;EAGA,OAAOE,YAAY,GAAI9G,QAA0B,IAAaO,MAAM,CAACwG,UAAU,CAACrB,QAAQ,CAACa,gBAAgB,CAAC,CAACvG,QAAQ,CAAC;;AAGtH;;;;;;AAMA,OAAO,MAAMgH,gBAAgB,GAAI7E,OAEhC,IACClC,KAAK,CAACiD,MAAM,CACVwC,QAAQ,EACR7F,MAAM,CAAC2C,GAAG,CAAC,aAAS;EAClB,MAAMyE,KAAK,GAAG,CAAC,OAAOvH,aAAa,CAACA,aAAa,EAAEwH,SAAS,CAACxB,QAAQ,CAACnF,MAAM,CAAC;EAC7E,MAAM4G,OAAO,GAAG,OAAOF,KAAK,CAACtC,GAAG,CAACxC,OAAO,CAACiF,GAAG,CAAC;EAC7C,IAAIlH,MAAM,CAACmH,MAAM,CAACF,OAAO,CAAC,EAAE;IAC1B,OAAOA,OAAO,CAACG,KAAK;EACtB;EACA,MAAMtH,QAAQ,GAAG0F,QAAQ,CAACC,UAAU,EAAE;EACtC,OAAOsB,KAAK,CAAClC,GAAG,CAAC5C,OAAO,CAACiF,GAAG,EAAEpH,QAAQ,CAAC;EACvC,OAAOA,QAAQ;AACjB,CAAC,CAAC,CACH;AAEH;;;;AAIA,OAAM,MAAOoB,QAAS,sBAAQxB,OAAO,CAAC2F,GAAG,CAAC,wCAAwC,CAAC,EAoB/E;AAEJ,MAAMU,IAAI,gBAAGpG,MAAM,CAAC2C,GAAG,CAAC,aAAS;EAC/B,MAAMxC,QAAQ,GAAG,OAAO0F,QAAQ;EAChC,MAAM/C,QAAQ,GAAG,OAAOC,QAAQ;EAChC,MAAM2E,OAAO,GAAG,OAAO9G,YAAY;EACnC,MAAMqB,QAAQ,GAAG,OAAOa,QAAQ,CAACb,QAAQ;EACzC,MAAM0F,OAAO,GAAG,OAAO1H,QAAQ,CAACmG,IAAI,EAAY;EAChD,MAAMwB,UAAU,GAAG,IAAIlD,GAAG,EAMtB;EACJ,MAAMmD,gBAAgB,GAAG,OAAO7H,MAAM,CAAC8H,aAAa,CAAC,CAAC,CAAC;EAEvD,MAAMC,UAAU,GAAG,OAAOjH,UAAU,CAACA,UAAU;EAC/C,MAAMkH,cAAc,GAA0C,EAAE;EAEhE,MAAMC,SAAS,GAAGjI,MAAM,CAACyD,UAAU,CACjC,WAAUyE,MAAsB;IAC9B,MAAMC,aAAa,GAAG,OAAOT,OAAO,CAACU,kBAAkB,CAACF,MAAM,CAAClE,EAAE,CAAC;IAClE,MAAMqE,OAAO,GAAG,OAAOH,MAAM,CAACG,OAAO,CAAClI,QAAQ,EAAEgI,aAAa,CAAC;IAE9D,OAAOE,OAAO,CAACC,OAAO,CAAClG,IAAI,CACzBpC,MAAM,CAACuI,OAAO,CAAC,CAAC,CAAC7E,OAAO,CAAC,KACvBgE,OAAO,CAACc,eAAe,CAAC;MACtBC,QAAQ,EAAEP,MAAM,CAAClE,EAAE;MACnBN,OAAO,EAAE5D,KAAK,CAAC4I,eAAe,CAAChF,OAAO,CAAC;MACvCiF,OAAO,EAAEf,UAAU,CAACgB,IAAI,GAAG,CAAC,GAC1B5I,MAAM,CAACyD,UAAU,CAAC,WAAUoF,aAAa;QACvC,IAAIC,WAAW,GAAGD,aAAmC;QACrD,MAAME,QAAQ,GAA8C,EAAE;QAC9D,IAAIC,WAAW,GAAiB,EAAE;QAClC,IAAIC,iBAAiB,GAAuB,EAAE;QAC9C,OAAO,IAAI,EAAE;UACX,IAAIC,CAAC,GAAG,CAAC;UACT,OAAOA,CAAC,GAAGJ,WAAW,CAACK,MAAM,EAAED,CAAC,EAAE,EAAE;YAClC,MAAME,WAAW,GAAGN,WAAW,CAACI,CAAC,CAAC;YAClC,IAAI,CAACtB,UAAU,CAAChD,GAAG,CAACwE,WAAW,CAACrF,KAAK,CAAC7B,KAAK,CAAC,EAAE;cAC5C8G,WAAW,CAACjE,IAAI,CAACqE,WAAW,CAACrF,KAAK,CAAC;cACnCkF,iBAAiB,CAAClE,IAAI,CAACqE,WAAW,CAAC;cACnC;YACF;YACA,IAAIJ,WAAW,CAACG,MAAM,GAAG,CAAC,EAAE;cAC1BJ,QAAQ,CAAChE,IAAI,CAAC,CAACiE,WAAW,EAAEC,iBAAiB,CAAC,CAAC;cAC/CD,WAAW,GAAG,EAAE;cAChBC,iBAAiB,GAAG,EAAE;YACxB;YACA,MAAMI,SAAS,GAAGzB,UAAU,CAAC9C,GAAG,CAACsE,WAAW,CAACrF,KAAK,CAAC7B,KAAK,CAAE;YAC1D,MAAM6B,KAAK,GAAGqF,WAAW,CAACrF,KAAK;YAC/B,MAAML,OAAO,GAAG,CAACK,KAAK,CAAC;YACvB,MAAM8E,aAAa,GAAG,CAACO,WAAW,CAAC;YACnC,MAAME,SAAS,GAAiB,EAAE;YAClC,MAAMC,cAAc,GAAGT,WAAW;YAClCA,WAAW,GAAG,EAAE;YAChB,KAAK,IAAIU,CAAC,GAAGN,CAAC,GAAG,CAAC,EAAEM,CAAC,GAAGD,cAAc,CAACJ,MAAM,EAAEK,CAAC,EAAE,EAAE;cAClD,MAAMC,eAAe,GAAGF,cAAc,CAACC,CAAC,CAAC;cACzC,IAAI,CAACH,SAAS,CAAClH,MAAM,CAACyC,GAAG,CAAC6E,eAAe,CAAC1F,KAAK,CAAC7B,KAAK,CAAC,EAAE;gBACtD4G,WAAW,CAAC/D,IAAI,CAAC0E,eAAe,CAAC;gBACjC;cACF;cACA/F,OAAO,CAACqB,IAAI,CAAC0E,eAAe,CAAC1F,KAAK,CAAC;cACnC8E,aAAa,CAAC9D,IAAI,CAAC0E,eAAe,CAAC;YACrC;YACA,OAAOJ,SAAS,CAAChG,MAAM,CAAC;cACtBK,OAAO;cACPC,KAAKA,CAACI,KAAK;gBACT,OAAO/D,MAAM,CAAC2F,IAAI,CAAC,MAAK;kBACtB2D,SAAS,CAACvE,IAAI,CAAChB,KAAK,CAAC;gBACvB,CAAC,CAAC;cACJ;aACD,CAAC;YACFgF,QAAQ,CAAChE,IAAI,CAAC,CAACuE,SAAS,EAAET,aAAa,CAAC,CAAC;YACzC;UACF;UACA,IAAIK,CAAC,KAAKJ,WAAW,CAACK,MAAM,EAAE;YAC5BJ,QAAQ,CAAChE,IAAI,CAAC,CAAC+D,WAAW,CAACY,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAAC5F,KAAK,CAAC,EAAE+E,WAAW,CAAC,CAAC;YAC7D;UACF;QACF;QACA,OAAOC,QAAQ;MACjB,CAAC,CAAC,GACFa,SAAS;MACXvG,MAAM,EAAErD,MAAM,CAACyD,UAAU,CACvB,WAAU;QAAEoG,SAAS;QAAE9F;MAAK,CAAE;QAC5B,MAAMlC,OAAO,GAAGI,QAAQ,CAAC8B,KAAK,CAAC7B,KAAK,CAAC;QACrC,IAAI,CAACL,OAAO,EAAE;UACZ,OAAO,OAAO7B,MAAM,CAAC8J,QAAQ,CAAC,iCAAiC/F,KAAK,CAAC7B,KAAK,GAAG,CAAC;QAChF;QACA,MAAM6H,aAAa,GAAGrJ,MAAM,CAACsJ,MAAM,CACjC/H,QAAQ,CAAC8B,KAAK,CAAC7B,KAAK,CAAC,CAACA,KAAK,CAACiC,cAA+C,CAC5E;QACD,MAAM8F,gBAAgB,GAA0C,IAAI3E,KAAK,CAACuE,SAAS,CAACV,MAAM,CAAC;QAC3F,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGW,SAAS,CAACV,MAAM,EAAED,CAAC,EAAE,EAAE;UACzCe,gBAAgB,CAACf,CAAC,CAAC,GAAG;YACpBnF,KAAK,EAAE8F,SAAS,CAACX,CAAC,CAAC;YACnBpF,OAAO,EAAE,OAAOiG,aAAa,CAACF,SAAS,CAACX,CAAC,CAAC,CAACpF,OAAO;WACnD;QACH;QACA,OAAOjC,OAAO,CAACA,OAAO,CAAC;UACrBiC,OAAO,EAAE,OAAOiG,aAAa,CAAChG,KAAK,CAACD,OAAO,CAAC;UAC5CC,KAAK;UACL8F,SAAS,EAAEI;SACZ,CAAC;QACF,IAAIjC,cAAc,CAACjE,KAAK,CAAC7B,KAAK,CAAC,EAAE;UAC/B,KAAK,MAAMqF,GAAG,IAAIS,cAAc,CAACjE,KAAK,CAAC7B,KAAK,CAAC,EAAE;YAC7C6F,UAAU,CAACmC,gBAAgB,CAAC;cAC1B,CAAC3C,GAAG,GAAG,CAACxD,KAAK,CAACQ,UAAU;aACzB,CAAC;UACJ;QACF;MACF,CAAC,EACDvE,MAAM,CAACmK,aAAa,CAACnK,MAAM,CAACsD,GAAG,CAAC,EAChC,CAACD,MAAM,EAAE;QAAEU;MAAK,CAAE,KAChB/D,MAAM,CAACoK,YAAY,CAAC/G,MAAM,EAAE;QAC1BgH,OAAO,EAAE,UAAU;QACnBhH,MAAM,EAAE,iBAAiB;QACzBiH,OAAO,EAAEvG,KAAK,CAACwG;OAChB,CAAC;KAEP,CAAC,CAACnI,IAAI,CAACyF,gBAAgB,CAAC2C,WAAW,CAAC,CAAC,CAAC,CAAC,CACzC,EACDxK,MAAM,CAACmK,aAAa,CAACnK,MAAM,CAACsD,GAAG,CAAC,EAChCtD,MAAM,CAACyK,OAAO,EACdzK,MAAM,CAACoK,YAAY,CAAC;MAClBC,OAAO,EAAE,UAAU;MACnBhH,MAAM,EAAE;KACT,CAAC,EACFrD,MAAM,CAAC0K,IAAI,CACZ;IAED,MAAM/G,KAAK,GAAG+D,OAAO,CAACiD,oBAAoB,CAACzC,MAAM,CAAClE,EAAE,EAAGN,OAAO,IAAKwE,MAAM,CAACvE,KAAK,CAACxD,QAAQ,EAAEuD,OAAO,CAAC,CAAC;IACnG,OAAO1D,MAAM,CAAC4K,YAAY,CAAC,MAAM5K,MAAM,CAAC6K,MAAM,CAAClH,KAAK,CAAC,CAAC;IACtD,OAAOA,KAAK;IACZ,OAAO,OAAOnD,KAAK,CAACsK,WAAW,CAAC,OAAOpD,OAAO,CAACW,OAAO,EAAE,CAAC,EAAE0C,MAAM,CAACC,gBAAgB,CAAC,CAAC5I,IAAI,CACtFpC,MAAM,CAACiL,QAAQ,CAACjL,MAAM,CAACkL,KAAK,CAAC,GAAG,CAAC,CAAC,EAClClL,MAAM,CAACiL,QAAQ,CAACtH,KAAK,CAAC,EACtB3D,MAAM,CAACmK,aAAa,CAACnK,MAAM,CAACsD,GAAG,CAAC,EAChCtD,MAAM,CAACyK,OAAO,CACf;EACH,CAAC,EACDzK,MAAM,CAACmL,MAAM,EACbnL,MAAM,CAACoL,cAAc,CAACvF,QAAQ,EAAE1F,QAAQ,CAAC,EACzCH,MAAM,CAACqL,aAAa,CACrB;EAED,MAAMC,YAAY,GAAGtL,MAAM,CAACyD,UAAU,CAAC,WAAU5B,OAA2B,EAAES,OAI7E;IACC,MAAMwB,OAAO,GAAG,OAAO9D,MAAM,CAACsE,KAAK,CACjC5D,MAAM,CAACwD,MAAM,CAACjC,QAAQ,CAACK,OAAO,CAACJ,KAAK,CAAC,CAACA,KAAK,CAACiC,cAAsD,CAAC,CACjG7B,OAAO,CAACwB,OAAO,CAChB,CACF;IACD,OAAO,OAAO+D,gBAAgB,CAAC2C,WAAW,CAAC,CAAC,CAAC,CAAC9C,OAAO,CAAC/D,KAAK,CAAC;MAC1DzB,KAAK,EAAEI,OAAO,CAACJ,KAAK;MACpBqC,UAAU,EAAE1C,OAAO,CAACK,KAAK,CAACqC,UAAU,CAACjC,OAAO,CAACwB,OAAO,CAAC;MACrDA,OAAO;MACPT,MAAM,EAAGU,KAAK,IACZ/D,MAAM,CAACuL,GAAG,CACR1J,OAAO,CAACA,OAAO,CAAC;QACdiC,OAAO,EAAExB,OAAO,CAACwB,OAAO;QACxBC,KAAK;QACL8F,SAAS,EAAE;OACZ,CAAC,EACF,MAAK;QACH,IAAI7B,cAAc,CAACjE,KAAK,CAAC7B,KAAK,CAAC,EAAE;UAC/B,KAAK,MAAMqF,GAAG,IAAIS,cAAc,CAACjE,KAAK,CAAC7B,KAAK,CAAC,EAAE;YAC7C6F,UAAU,CAACmC,gBAAgB,CAAC;cAC1B,CAAC3C,GAAG,GAAG,CAACxD,KAAK,CAACQ,UAAU;aACzB,CAAC;UACJ;QACF;MACF,CAAC;KAEN,CAAC,CAAC;EACL,CAAC,EAAE,CAAClB,MAAM,EAAExB,OAAO,KAAK7B,MAAM,CAACwL,eAAe,CAACnI,MAAM,EAAGrB,OAAO,IAAKjC,OAAO,CAAC0L,KAAK,CAAC5J,OAAO,CAACG,OAAO,EAAEA,OAAO,CAAC,CAAC,CAAC;EAE7G,OAAOT,QAAQ,CAACwE,EAAE,CAAC;IACjBpC,KAAK,EAAGrB,OAIP,IAAI;MACH,MAAMT,OAAO,GAAGI,QAAQ,CAACK,OAAO,CAACJ,KAAK,CAAC;MACvC,IAAIL,OAAO,KAAK+H,SAAS,EAAE;QACzB,OAAO5J,MAAM,CAAC0L,GAAG,CAAC,iCAAiCpJ,OAAO,CAACJ,KAAK,GAAG,CAAC;MACtE;MACA,OAAOoJ,YAAY,CAACzJ,OAAO,EAAES,OAAO,CAAQ;IAC9C,CAAC;IACDoB,OAAO,EAAEgE,OAAO,CAAChE,OAAO;IACxBiI,cAAc,EAAGzD,MAAM,IACrBlI,MAAM,CAAC4L,cAAc,CACnB3L,QAAQ,CAAC4L,GAAG,CAAClE,OAAO,EAAEO,MAAM,CAAClE,EAAE,EAAEiE,SAAS,CAACC,MAAM,CAAC,CAAC,EACnD,MAAMjI,QAAQ,CAAC6L,MAAM,CAACnE,OAAO,EAAEO,MAAM,CAAClE,EAAE,CAAC,CAC1C;IACHT,kBAAkB,EAAGjB,OAAO,IAC1BtC,MAAM,CAAC4L,cAAc,CACnB5L,MAAM,CAAC2F,IAAI,CAAC,MAAK;MACf,MAAMxD,MAAM,GAAG,IAAI4J,GAAG,CAACzJ,OAAO,CAACH,MAAM,CAAC;MACtC,MAAMkH,SAAS,GAAG;QAChBlH,MAAM;QACNkB,MAAM,EAAEf,OAAO,CAACe;OACjB;MACD,KAAK,MAAMnB,KAAK,IAAII,OAAO,CAACH,MAAM,EAAE;QAClCyF,UAAU,CAAC1C,GAAG,CAAChD,KAAK,EAAEmH,SAAS,CAAC;MAClC;IACF,CAAC,CAAC,EACF,MACErJ,MAAM,CAAC2F,IAAI,CAAC,MAAK;MACf,KAAK,MAAMzD,KAAK,IAAII,OAAO,CAACH,MAAM,EAAE;QAClCyF,UAAU,CAACoE,MAAM,CAAC9J,KAAK,CAAC;MAC1B;IACF,CAAC,CAAC,CACL;IACHsD,kBAAkB,EAAGhC,IAAI,IACvBxD,MAAM,CAAC2F,IAAI,CAAC,MAAK;MACfpD,MAAM,CAACC,MAAM,CAACwF,cAAc,EAAExE,IAAI,CAAC;IACrC,CAAC,CAAC;IACJyI,OAAO,EAAEvE,OAAO,CAACuE;GAClB,CAAC;AACJ,CAAC,CAAC;AAEF;;;;AAIA,OAAO,MAAM7G,aAAa,gBAA0DhF,KAAK,CAAC+K,MAAM,CAAC5J,QAAQ,EAAE6E,IAAI,CAAC,CAAChE,IAAI,cACnHhC,KAAK,CAAC8C,OAAO,CAAC,CAACH,QAAQ,CAACI,KAAK,EAAErC,UAAU,CAACqC,KAAK,CAAC,CAAC,CAClD;AAED;;;;AAIA,OAAO,MAAMA,KAAK,GAAmC+I,OAA+B,IAI/E9G,aAAoB;AAEzB;;;;AAIA,OAAO,MAAM+G,UAAU,GACrB9K,MAA8B,IAY9BrB,MAAM,CAAC2C,GAAG,CAAC,aAAS;EAClB,MAAMW,GAAG,GAAG,OAAO/B,QAAQ;EAE3B,OAAO,CACLW,KAAU,EACV4B,OAA6D,KAI1DR,GAAG,CAACK,KAAK,CAAC;IAAEtC,MAAM;IAAEa,KAAK;IAAE4B;EAAO,CAAE,CAAC;AAC5C,CAAC,CAAC","ignoreList":[]}